<%- include("partials/header")  %>
<main>
    <h2 class="titulo--Filme">Descubra </h2>
    <% locals.pagina.results.forEach(film => { %>
        <a href="/movie/<%= film.id %>" class="cardFilm">
            <img src="https://image.tmdb.org/t/p/w500<%= film.poster_path %>" alt="">
            <h3>
                <%= film.title %>
            </h3>
            <div class="nota">
                <span><%= film.vote_average %></span>
            </div>
        </a>
    <%    }); %>

    <div class="paginacao">
        <%
        const paginaAtual = pagina.page;
        const totalPaginas = pagina.total_pages;
        const paginaAnterior = Math.max(1, paginaAtual - 5);
        const proximaPagina = Math.min(totalPaginas, paginaAtual + 5);
        %>

        <% if (!locals.pesquisa) { %>
            <% for (let i = paginaAnterior; i <= proximaPagina; i++) { %>
                <% if (i === paginaAtual) { %>
                    <span class="current"><%= i %></span>
                <% } else { %>
                    <a href="/?pag=<%= i %>"><%= i %></a>
                <% } %>
            <% } %>

            <% if (paginaAtual < 6) { %>
                <% for (let i = proximaPagina; i < 11; i ++) { %>
                    <a href="/?pag=<%= (i + 1) %>"><%= i + 1 %></a>
                    <% } %>
            <% } %>
        <% } %>



    </div>

    <script src="/paginacao.js"></script>
</main>
<%- include("partials/footer") %>